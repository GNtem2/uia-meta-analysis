---
title: "01-Tables"
author: "Ronil V. Chandra"
date: "13/06/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

###Load packages

```{r load packages, echo = FALSE, include = FALSE}

library(tidyverse)
library(kableExtra)
```

#### Load required data

A single excel data file is loaded to carry out all data table creation, with all steps documented below to ensure reproducibility of research.

```{r load data, echo = FALSE, include = FALSE}

maindata <- read_csv("data/maindata.csv")
```


### Analyse total cohort of all aneurysms 10 mm and less 

```{r select total cohort}

sizedata <- filter(maindata, size == 10)

```

Assumptions: 

1. If number of aneurysms is unkown, then assume that 1 patient has 1 aneurysm ie variable num carries forward to num_anr, and is called new vaariable total_size. 
2. If the number of aneuryms for that size criteria are known, then then variable num ie number of patients is **not** carried forward. 

```{r coalesce patients into aneurysms}

dat <- sizedata %>%
  mutate(total_size = coalesce(num_anr,num)) %>%
  drop_na(total_size) %>% 
  unite(auth_year, c(auth, pub), sep = " ", remove = FALSE) %>%
  select(auth_year, rupt, total_size)

```

### Display all included information for all aneurysms 10 mm and less 
### Display all included information for all aneurysms 10 mm and less - option 2 = Kable and Kable Extra. 


```{r, results = 'asis'}

sizedata %>%
  select(auth, pub, country, type, num_tot) %>%
  knitr::kable(
    caption = "Table 1: Baseline Study Characteristics",
    col.names = c("Author", "Publication Year", "Population", "Study Type", "Number of aneurysms"),
    align = c("l", "c", "c", "c", "c"),
    longtable=TRUE,
    digits = 1) %>%
  kableExtra::kable_styling(full_width = FALSE) %>%
  footnote(
    general_title = "Footnote:",
    general = "Standard deviations are presented in parentheses,Standard deviations are presented in parenthesesStandard deviations are presented in parenthesesStandard deviations are presented in parenthesesStandard deviations are presented in parentheses",
    threeparttable=TRUE,
    )


```



